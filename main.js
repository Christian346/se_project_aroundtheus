!function(){"use strict";var e=class{constructor(e,t){this._settings=e,this._form=t,this._inputList=[...this._form.querySelectorAll(e.inputSelector)],this._submitButton=this._form.querySelector(e.submitButtonSelector),this._inputSelector=e.inputSelector,this._inactiveButton=e.inactiveButtonClass,this._inputError=e.inputErrorClass,this._error=e.errorClass}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._settings.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.textContent="",t.classList.remove(this._settings.errorClass)}_hasInvalidInput(){return!this._inputList.every((e=>e.validity.valid))}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_toggleButtonState(){this._hasInvalidInput()?this.disabledButton():(this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1)}disabledButton(){this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}},t=class{constructor(e,t,s,r,n){this._name=e.name,this._link=e.link,this._id=e._id,this.isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteButton=r,this._handleLikeClickButton=n}_setEventListeners(){this._element.querySelector(".card__image ").addEventListener("click",(()=>this._handleImageClick(this._name,this._link))),this._element.querySelector(".card__heart").addEventListener("click",(()=>this._handleLikeClickButton(this))),this._element.querySelector(".card__trashcan-btn").addEventListener("click",(()=>this._handleDeleteButton(this._id,this._element)))}toggleLikeButton(){this._element.querySelector(".card__heart").classList.toggle("card__heart_active")}_checkLikeState(){this.isLiked&&this._element.querySelector(".card__heart").classList.add("card__heart_active")}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getElementView(){return this._element=this._getTemplate(),this._element.querySelector(".card__image").src=this._link,this._element.querySelector(".card__image").alt=this._name,this._element.querySelector(".card__text").textContent=this._name,this._setEventListeners(),this._checkLikeState(),this._element}};class s{constructor(e,t){let{items:s,renderer:r}=e;this._initialArray=s,this._renderFunction=r,this._container=t}renderMethod(){this._initialArray.forEach((e=>{this._renderFunction(e)}))}addItem(e){this._container.prepend(e)}}const r=document.querySelector(".lowheader__editbutton"),n=document.querySelector(".modal_type_edit-js"),o=(n.querySelector(".modal__close"),document.querySelector(".lowheader__title"),document.querySelector(".lowheader__span"),document.querySelector("#profile-title-input")),i=document.querySelector("#profile-description-input"),a=document.querySelector(".modal_type_add-js"),l=document.querySelector("#add-button"),c=(a.querySelector("#add-close-button"),a.querySelector("#add-card-form")),d=(document.querySelector(".modal_type_picture-js"),document.querySelector("#picture-close-button"),document.querySelector(".modal__pictures"),document.querySelector(".modal__pictures_alt"),n.querySelector(".modal__form")),h=(document.querySelector(".card-template").content.firstElementChild,document.querySelector(".gallery")),u=(document.querySelectorAll(".modal"),document.querySelector(".card-template"),document.querySelector(".modal_type_delete_card-js"),document.querySelector(".lowheader__editpen")),_=document.querySelector("#changeprofilepic-form"),m={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class p{constructor(e){let{modalSelector:t}=e;this._modalElement=document.querySelector(t)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose)}close(){this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}_handleEscapeClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._modalElement.addEventListener("click",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}class S extends p{constructor(e){let{modalSelector:t,handleFormSubmit:s}=e;super({modalSelector:t}),this._modalForm=this._modalElement.querySelector(".modal__form"),this._handleFormSubmit=s,this._inputList=this._modalForm.querySelectorAll(".modal__input"),this._submitButton=this._modalElement.querySelector(".modal__button")}_getinputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._modalForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getinputValues())})),super.setEventListeners()}close(){this._modalForm.reset(),super.close()}setLoadingButtonText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";if(e)return this._submitButton.textContent=t;this._submitButton.textContent="Save"}}const y=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_handleResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>this._handleResponse(e)))}getInitialUser(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>this._handleResponse(e)))}setAvatarImage(e){return fetch(`${this._baseUrl}/users/me/avatar`,{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((e=>this._handleResponse(e)))}setUserNameInfo(e){let{name:t,description:s}=e;return fetch(`${this._baseUrl}/users/me`,{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,about:s})}).then((e=>this._handleResponse(e)))}postNewCard(e,t){return fetch(`${this._baseUrl}/cards`,{headers:this._headers,method:"POST",body:JSON.stringify({name:e,link:t})}).then((e=>this._handleResponse(e)))}deleteACard(e){return fetch(`${this._baseUrl}/cards/${e}`,{headers:this._headers,method:"DELETE"}).then((e=>this._handleResponse(e)))}deleteTheCardLikeState(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{headers:this._headers,method:"DELETE"}).then((e=>this._handleResponse(e)))}addTheCardLikeState(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{headers:this._headers,method:"PUT"}).then((e=>this._handleResponse(e)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"de932c6e-7e22-469e-9495-2cd43cd1231b","Content-Type":"application/json"}}),E=new e(m,d),v=new e(m,c),L=new e(m,_);E.enableValidation(),v.enableValidation(),L.enableValidation();const b=new S({modalSelector:".modal_type_edit-js",handleFormSubmit:function(e){b.setLoadingButtonText(!0),y.setUserNameInfo(e).then((e=>{console.log(e),k.setUserInfo({name:e.name,description:e.about})})).catch(console.error).finally((()=>{b.setLoadingButtonText(!1)})),b.close()}});b.setEventListeners();const f=new S({modalSelector:".modal_type_add-js",handleFormSubmit:function(e){const t=e.title,s=e.link;y.postNewCard(t,s).then((e=>{const t=B(e);x.addItem(t),f.close()})).catch((e=>console.error(e))),v.disabledButton()}});f.setEventListeners();const g=new class extends p{constructor(e){let{modalSelector:t}=e;super({modalSelector:t})}open(e){const{name:t,link:s}=e;super.open(),this._modalElement.querySelector(".modal__pictures").setAttribute("src",s),this._modalElement.querySelector(".modal__pictures").alt=t,this._modalElement.querySelector(".modal__pictures_alt").textContent=t}}({modalSelector:".modal_type_picture-js"});g.setEventListeners();const k=new class{constructor(e){let{nameSelector:t,descriptionSelector:s,AvatarSelector:r}=e;this._nameElement=document.querySelector(t),this._descriptionElement=document.querySelector(s),this._avatarElement=document.querySelector(r)}getUserInfo(){return{userName:this._nameElement.textContent,userDescription:this._descriptionElement.textContent}}setUserInfo(e){let{name:t,description:s}=e;t&&(this._nameElement.textContent=t),s&&(this._descriptionElement.textContent=s)}setUserAvatar(e){let{picture:t}=e;t&&(this._avatarElement.src=t)}}({nameSelector:".lowheader__title",descriptionSelector:".lowheader__span",AvatarSelector:".lowheader__img"}),q=new class extends p{constructor(e){let{modalSelector:t}=e;super({modalSelector:t}),this._submitButton=this._modalElement.querySelector(".modal__button"),this._initialText=this._submitButton.textContent.trim(),this._modalForm=this._modalElement.querySelector(".modal__form")}setSubmitAction(e){this._handleSubmitCallback=e}setEventListeners(){this._modalForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmitCallback()})),super.setEventListeners()}}({modalSelector:".modal_type_delete_card-js"});q.setEventListeners();const C=new S({modalSelector:".modal_type_changeprofilepic-js",handleFormSubmit:function(e){let{link:t}=e;y.setAvatarImage(t).then((e=>{console.log(e),k.setUserAvatar({picture:e.avatar}),C.close()})).catch((e=>console.log(">>ERROR",e)))}});function B(e){return new t(e,".card-template",w,U,I).getElementView()}function I(e){e.isLiked?e.isLiked&&y.deleteTheCardLikeState(e._id).then((()=>{e.isLiked=!1,e.toggleLikeButton()})).catch(console.error):y.addTheCardLikeState(e._id).then((()=>{e.isLiked=!0,e.toggleLikeButton()})).catch(console.error)}function w(e,t){g.open({name:e,link:t})}function U(e,t){q.open(),q.setSubmitAction((function(){y.deleteACard(e).then((()=>{t.remove(),q.close()}))}))}let x;C.setEventListeners(),r.addEventListener("click",(function(){const e=k.getUserInfo();o.value=e.userName,i.value=e.userDescription,b.open()})),l.addEventListener("click",(function(){f.open()})),u.addEventListener("click",(function(){C.open()})),y.getInitialCards().then((e=>{x=new s({items:e,renderer:e=>{!function(e){const t=B(e);x.addItem(t)}(e)}},h),x.renderMethod()})).catch((e=>console.log(">>ERROR",e))),y.getInitialUser().then((e=>{k.setUserInfo({name:e.name,description:e.about}),k.setUserAvatar({picture:e.avatar})})).catch((e=>console.log(">>ERROR",e)))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQ2xCLE1BQU1DLEVBQVcvQixFQUFZOEIsR0FDN0I3QixFQUFTOUYsUUFBUTRILEVBQ25CLENBd0pVQyxDQUFXRixFQUFlLEdBRzlCaEgsR0FFRm1GLEVBQVNoRyxjQUFjLElBRXhCd0YsT0FBT0MsR0FBVUwsUUFBUUMsSUFBSSxVQUFXSSxLQUkzQzFDLEVBQUlnQixpQkFDREQsTUFBTVIsSUFFTGdDLEVBQVNDLFlBQVksQ0FDbkJuSCxLQUFNa0YsRUFBSWxGLEtBQ1ZtRyxZQUFhakIsRUFBSWtCLFFBR25CYyxFQUFTdUIsY0FBYyxDQUNyQkUsUUFBU3pELEVBQUlXLFFBQ2IsSUFDRHVCLE9BQU9DLEdBQVVMLFFBQVFDLElBQUksVUFBV0ksSSIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1TdWJtaXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudFR5cGUpIHtcblxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3NcbiAgICB0aGlzLl9mb3JtID0gLypkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCovZm9ybUVsZW1lbnRUeXBlLy8pIC8vcXVlcnlzZWxlY3QgZm9yIHdoaWNoZXZlciBmb3JtIHNlbGVjdG9yXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5pbnB1dFNlbGVjdG9yKV0gLy9zZWxlY3RzIGFsbCBpbnB1dHMgZm9yIHRoYXQgc3BlY2lmaWMgZm9ybVxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcilcblxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yIC8qdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKi8gLyooL3NldHRpbmdzLmlucHV0U2VsZWN0b3IpOyovXG4gICAgLy8gdGhpcy5fc3VibWl0QnV0dG9uID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b24gPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzIC8qdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpOyovXG4gICAgdGhpcy5faW5wdXRFcnJvciA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcyAvKnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpOyovXG4gICAgdGhpcy5fZXJyb3IgPSBzZXR0aW5ncy5lcnJvckNsYXNzIC8qdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLmVycm9yQ2xhc3MpOyovXG5cbiAgICAvL3RoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7IC8vdGhpcyByZWZlcnMgdG8gdGhlIHNjb3BlIHRoYXQgaXQgaXMgd2l0aGluXG4gIH1cblxuICAvLyBicmluZyBhbGwgZnVuY3Rpb25hbGl0eSBpbnRvIG1ldGhvZHNcblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xuXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYClcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTsgLy8gbWFrZXMgaXQgcmVkXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcylcbiAgfSAvL2dvb2RcblxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG5cbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKVxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpOyAvLyBtYWtlcyBpdCByZWRcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKVxuICB9XG4gIC8vZ29vZFxuXG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0TGlzdC5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZClcbiAgfVxuICAgICAvL2V2ZXJ0aW1lIGkgbWFrZSBhIHJlZmVyZW5jZSBvZiBhIHByb3BlcnR5IG9yIG1ldGhvZCBpdCB3aWxsIG5lZWQgdGhlIHRoaXMuIGtleXdvcmQgZm9yIGl0IHRvIHdvcmsgd2l0aGluIGNsYXNzXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgfVxuXG4gIC8vbm8gbmVlZCB0byBwYXNzIHBhcmFtZXRlcnMganVzdCB1c2UgdGhlIHRoaXMgcHJvcGVydGllcyFcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgIC8vc2hvdWxkbid0IHRoaXMgbWFrZSBpdCBzbyB0aGF0IHRoZSBidXR0b24gaXMgZGlzYWJsZWQgYnkgZGVmYXVsdD9cbiAgICAgdGhpcy5kaXNhYmxlZEJ1dHRvbigpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBkaXNhYmxlZEJ1dHRvbigpe1xuICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKSAvL21heWJlIGluc2lkZSBwYXJlbnRoaXMgaGFzIHRvIGJlIHRoaXMuX2luYWN0aXZlIGNoZWNrIGZvciBsYXRlclxuICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IgLypjb25maWdPYmouZm9ybVNlbGVjdG9yKi8gKV1cbiAgICAvL3RoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICAvL2xvb3AgdGhyb3VnaCBhbGwgdGhlIGlucHV0cyB0byBzZWUgaWYgYWxsIGFyZSB2YWxpZFxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0RWwgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgIC8vY29uc29sZS5sb2coaW5wdXRFbCkgLy9lLnRhcmdldCBpcyB0aGUgc2FtZSBhcyBpbnB1dEVsIGluIHRoaXMgY2FzZVxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbClcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTsgLy90aGVuIGJyaW5nIGluIHRvZ2dsZSBidXR0b24gc3RhdGVcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgLy9zZXRFdmVudExpc3RlbmVycyhpbmRpdmlkdWFsRm9ybSwgY29uZmlnT2JqKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbi8vaWxsIG5lZWQgdGhlIGZvciBlbGVtZW50IGFuZCB0aGUgY29uZmlnIG9ialxuLypcbmNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIlxufVxuKi9cblxuXG4vKlxuLy90aGVzZSAyIHdpbGwgYmUgdHJhbnNmZXJlZCB0byBpbmRleC5qc1xuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZWRpdEZvcm0pOyAvL2ZvciBlZGl0aW5nIHRoZSBuYW1lXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4qL1xuLy9jb25zdCBhZGRGb3JtVmFsdWUgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYWRkRm9ybSk7IC8vZm9yIGFkZGluZyBhIGNhcmQiLCJjbGFzcyBDYXJkIHtcbiAgLy9pZiB0aGUgY29uc3RydWN0b3IgZXhwZWN0cyBhbmQgb2JqZWN0IHRoZSBvcmRlciBvZiB0aGUgZXhwZWN0ZWQgcHJvcGVydGllcyBkb2VzIG5vdCBtYXR0ZXIhIGluIHRoaXMgY2FzZSBpdCBkb2VzIGJlY2F1c2UgaXQgZXhwZWN0cyBtb3JlIHRoaW5ncyB0aGFuIGFuIG9ialxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2ssaGFuZGxlRGVsZXRlQnV0dG9uLCBoYW5kbGVMaWtlQ2xpY2tCdXR0b24pIHtcbiAgICAvLyB0aGVyZSdzIGEgbG9jYWwgdmFyaWFibGUgY2FsbGVkIGhhbmRsZUltYWdlQ2xpY2tcbiAgICAvLyB3aXRoIHZhbHVlIHRoZSBzYW1lIGFzIHdoYXRldmVyIHdhcyBwYXNzZWQgYXMgdGhpcmQgYXJndW1lbnRcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lOyAvLyB0aGUgaW5zdGFuY2VzIG1ha2UgcmVmZXJlbmNlIHRvIHRoZSBvYmplY3RzIHByb3BlcnRpZXMgYW5kIGFyZSBwYXNzZWQgZnJvbSBpbmRleCB3aGVuIHRoZSBjbGFzcyBpcyBpbnN0YW5jaWF0ZWRcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuXG4gICAgLy8gaW4gdGhlIGRhdGEgb2JqZWN0IHRoZXJlIGlzIGFuIGlzTGlrZWQgcHJvcGVydHlcbiAgICAvLyBzYXZlIGl0IHRvIHRoaXNcblxuXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZCAvL21vbmdvZGIgZGF0YWJhc2UgaGFzIHRoaXMgY29udmVudGlvbiB3aXRoIGFuIHVuZGVyc2NvcmVcbiAgICB0aGlzLmlzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XG5cbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3JcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24gPSBoYW5kbGVEZWxldGVCdXR0b247XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrQnV0dG9uID0gaGFuZGxlTGlrZUNsaWNrQnV0dG9uO1xuXG4gICAgLy8yIHNwYWNlc1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkgeyAvL3RoZSBhcnJvdyBmdW5jdGlvbiBiaW5kcyB0aGlzIHRvIGNhbGxiYWNrIGludG8gdGhlIGluc3RhbmNlIG9mIHRoZSBjbGFzc1xuICAgIC8vIGltcGxpY2l0IGFuZCBleHBsaWNpdCBiaW5kaW5nXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlIFwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluaykpOyAvL2Fycm93IGZ1bmN0aW9ucyBhbGxvd3MgdG8gYmluZCB0aGUgdGhpcyB0byB0aGUgcHJvcGVyIGNvbnRleHQuXG4gICAgLy8gcGFzcyBgdGhpc2Agb2JqZWN0IGFzIGFuIGFyZ3VtZW50XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2hlYXJ0XCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUNsaWNrQnV0dG9uKHRoaXMpKS8vIGJ5IGRvaW5nIHRoYXQgaW0gcGFzc2luZyB0aGUgd2hvbGUgY2FyZCBvYmplY3RcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaGNhbi1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbih0aGlzLl9pZCwgdGhpcy5fZWxlbWVudCkpLy8gaSBuZWVkIHdoaWNoZXZlciBwYXJhbXRlcnMgYXJlIGJlaW5nIHVzZWQgd2hlbiBpbnZva2VkXG4gIH1cblxuICAvKlxuICAgICAgZnVuY3Rpb24gaGFuZGxlQ2xpY2sobnVtYmVyKSB7XG5cbiAgICAgIH1cblxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2EnKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiBoYW5kbGVDbGljayhldmVudCwgNykpO1xuICAgIH1cbiAgKi9cblxuICAgIC8vIHVzZSBhZnRlciBzdWNjZXNmdWwgcmVxdWVzdCBpbiB0aGUgLiB0aGVuKClcbiAgdG9nZ2xlTGlrZUJ1dHRvbigpIHtcbiAgICAvL3RoaXMgZWxlbWVudCBpbiB0aGlzIGNhc2UgaXMgdGhlIGZvcm0gZWxlbWVudFxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2hlYXJ0JykuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9faGVhcnRfYWN0aXZlJyk7XG4gIH1cblxuICBfY2hlY2tMaWtlU3RhdGUoKXtcbiAgIGlmKHRoaXMuaXNMaWtlZCl7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faGVhcnQnKS5jbGFzc0xpc3QuYWRkKCdjYXJkX19oZWFydF9hY3RpdmUnKTtcbiAgIH1cbiAgfVxuXG4gLypcbiAgX2hhbmRsZVRyYXNoQnRuKCkge1xuICAgIC8vIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gIH1cbiovXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuICAvLyByZXR1cm5zIHRoZSBlbGVtZW50IG9mIHRoZSBjYXJkIGJ1dCBkb2Vzbid0IHJlbmRlclxuICAvL2l0cyBvayB0byBjcmVhdGUgYSBwcm9wZXJ0eSBvdXRzaWRlIG9mIHRoZSBjb25zdHJ1Y3RvclxuICBnZXRFbGVtZW50VmlldygpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjIC8qc3R5bGUuYmFja2dyb3VuZEltYWdlKi8gPSB0aGlzLl9saW5rOyAvKmB1cmwoJHt0aGlzLl9saW5rfSlgOyovXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RleHRcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAvLyBjaGVjayBpZiB0aGUgY2FyZCBpcyBsaWtlZFxuICAgIC8vICAgIGlmIHNvLCBhZGQgdGhlIGFjdGl2ZSBjbGFzc1xuICAgIHRoaXMuX2NoZWNrTGlrZVN0YXRlKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgaXRlbXMsXG4gICAgcmVuZGVyZXJcbiAgfSwgY29udGFpbmVyT3B0aW9uKSB7XG4gICAgdGhpcy5faW5pdGlhbEFycmF5ID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyRnVuY3Rpb24gPSByZW5kZXJlclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lck9wdGlvblxuXG4gIH1cbiAgLy9mb3IgaW5pdGlhbCBhcnJheVxuICByZW5kZXJNZXRob2QoKSB7XG4gICAgLy9yZW5hbWUgdG8gaXRlbXMgbGF0ZXJcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkuZm9yRWFjaCgoY2FyZEl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlckZ1bmN0aW9uKGNhcmRJdGVtKTsgLy8gY2FsbCByZW5kZXJlcigpIGFuZCBwYXNzIGl0ZW0gdG8gaXRcblxuICAgIH0pXG5cbiAgfVxuICAvL3RvIGFkZCBpdGVtcyBhZnRlcndhcmRzXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpXG4gIH1cblxufVxuXG4vL3RoaXMgY2xhc3MgZXhpc3RzIHRvIHNwZWNpZmljYWxseSB0byBhZGQgZWxlbWVudHMgdG8gdGhlIERPTSIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbe1xuICAgIG5hbWU6IFwiRWwgUGljbyBEdWFydGVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTM4NDMwMzUyMjY2LWRlNmJjYmE5YTA2Yj9xPTgwJnc9MjA3NCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJNb3VudCBSdXNobW9yZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wbHVzLnVuc3BsYXNoLmNvbS9wcmVtaXVtX3Bob3RvLTE2NjE4NTU1OTAxODMtODc4MDYxODI5NTFiP3E9ODAmdz0yMDcwJmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJZZWxsb3dzdG9uZSBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU5NDA3MzYzMjQyMi1lZjk3NjhmODdmYTQ/cT04MCZ3PTIwNDMmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlRoZSBFdmVyZ2xhZGVzXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU2OTAwNzI0NDQyOS1kNjE3MzM3NTMwMDY/cT04MCZ3PTE5NzQmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkRlYXRoIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NTMxNTI1MzEtYjk4YTJmYzhkM2JmP3E9ODAmdz0xOTMxJmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWhpYSBkZSBsYXMgQWd1aWxhc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1OTU3ODg0Mjk4MTItNmUxODUyMjlhMjk0P3E9ODAmdz0yMTI3JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuXTtcblxuXG4vL1ZBUklBQkxFU1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxvd2hlYWRlcl9fZWRpdGJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF90eXBlX2VkaXQtanNcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU1vZGFsQ2xvc2VCdG4gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb3doZWFkZXJfX3RpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG93aGVhZGVyX19zcGFuXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIpO1xuXG4vL2xldCBwcm9maWxlU2F2ZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9maWxlc2F2ZWJ0bicpXG5leHBvcnQgY29uc3QgY2FyZEFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF90eXBlX2FkZC1qc1wiKTtcbmV4cG9ydCBjb25zdCBjYXJkQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtYnV0dG9uXCIpXG5leHBvcnQgY29uc3QgY2FyZEFkZENsb3NlQnV0dG9uID0gY2FyZEFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNsb3NlLWJ1dHRvblwiKVxuZXhwb3J0IGNvbnN0IGNhcmRBZGRGb3JtID0gY2FyZEFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNhZGQtY2FyZC1mb3JtJylcblxuLy9maW5kIHByZXZpZXdJbWFnZU1vZGFsIGhlcmVcbmV4cG9ydCBjb25zdCBwaWN0dXJlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfdHlwZV9waWN0dXJlLWpzJylcbmV4cG9ydCBjb25zdCBwaWN0dXJlTW9kYWxDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwaWN0dXJlLWNsb3NlLWJ1dHRvbicpXG5leHBvcnQgY29uc3QgcGljdHVyZU1vZGFsSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19waWN0dXJlc1wiKSAvL0l04oCZcyBiZXR0ZXIgdG8gZmluZCBjb25zdGFudHMgb25seSAxIHRpbWUgYXQgdGhlIHRvcCBvZiB0aGUgZmlsZSBzbyBhcyBub3QgdG8gd2FzdGUgcmVzb3VyY2VzIG9uIHNlYXJjaGluZyB0aGVtIGFnYWluIGFuZCBhZ2FpbiB3aGVuIHlvdSBjYWxsIGEgbWV0aG9kIChmdW5jdGlvbikgYmVjYXVzZSBzZWFyY2hpbmcgaXMgYSB2ZXJ5IGhhcmQgb3BlcmF0aW9uIGZvciB0aGUgYnJvd3NlciBlbmdpbmVcbmV4cG9ydCBjb25zdCBwaWN0dXJlTW9kYWxDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcGljdHVyZXNfYWx0XCIpXG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7IC8vZ3JhYnMgY29udGVudCBhcyBhIGZyYWdtZW50IGFuZCB0byBnZXQgdGhlIGVsZW1lbnQgeW91IG5lZWQgdG8gdXNlIGl0cyBmaXJzdGVsZW1lbnRjaGlsZFxuZXhwb3J0IGNvbnN0IGNhcmRHYWxsZXJ5U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeVwiKTtcbi8vdGhpcyB2YXJpYWJsZSBpcyB3aGVyZSB0aGUgY2FyZHMgd2lsbCBiZSBhcHBlbmRlZCBvciByZW5kZXJlZFxuZXhwb3J0IGNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIilcbmV4cG9ydCBjb25zdCBjYXJkU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC10ZW1wbGF0ZScpXG4vL1RPRE8gZ2V0IGFsbCB0cmFzaGJpbiBpY29uc1xuXG5leHBvcnQgY29uc3QgZGVsZXRlQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX3R5cGVfZGVsZXRlX2NhcmQtanMnKVxuXG5leHBvcnQgY29uc3QgY2hhbmdlQXZhdGFySWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb3doZWFkZXJfX2VkaXRwZW4nKVxuXG5leHBvcnQgY29uc3QgY2hhbmdlQXZhdGFyUGljdHVyZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hhbmdlcHJvZmlsZXBpYy1mb3JtJylcblxuXG5cblxuXG4vL1ZBTElEQVRJT05cblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLCAvL21pZ2h0IG5vdCBiZSBuZWVkZWRcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIG1vZGFsU2VsZWN0b3JcbiAgfSkge1xuICAgIHRoaXMuX21vZGFsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxTZWxlY3RvcilcbiAgfVxuICBvcGVuKCkge1xuICAgIC8vb3BlbnMgbW9kYWwgb3IgcG9wdXBcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UpXG5cbiAgfVxuICBjbG9zZSgpIHtcbiAgICAvL2Nsb3NlIG1vZGFsXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKVxuICB9XG4gICAgICAgICAgICAgICAgICAgICAgLy9hbiBhcnJvdyBmdW5jdGlvbiBiaW5kcyB0aGlzIHRvIHRoZSBpbnN0YW5jZSBvZiB0aGUgcG9wdXBjbGFzcyB0aGlzIG9ialxuICBfaGFuZGxlRXNjYXBlQ2xvc2UgPSAoZSkgPT4ge1xuICAgIC8vbGlzdGVucyBmb3IgZXNjIGJ0blxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsX19jbG9zZScpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy9zZXRzICBldmVudCBsaXN0ZW5lcnNcbiAgICAvL2Nsb3NlIGJ0blxuICAgIC8vb3V0c2lkZSBjbGlja1xuXG4gIH1cbiAgLy9tb3N0IG9mIHRoaXMgY29kZSBzaG91bGQgYmUgaW4gdXRpbHNcbn1cbi8vIHJlYWQgdXAgaGFuZGxlIGVzYyBmdW5jdGlvbiBpdCdzIHdyaXR0ZW5cbi8vWW91IHdvbuKAmXQgaW5zdGFudGlhdGUgeW91ciBQb3B1cCBjbGFzcyBkaXJlY3RseSBpbiBpbmRleC5qczsgaW5zdGVhZCwgeW914oCZbGwgaW5zdGFudGlhdGUgaXRzIGNoaWxkcmVuIGNsYXNzZXMsIGFzIGRlc2NyaWJlZCBiZWxvdy4iLCIvL2ltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiOyAvL2RvZXMgaXQgbmVlZCAuanMgYXQgdGhlIGVuZD9cblxuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbi8vdGhpcyBpcyBhIGNoaWxkIG9mIHRoZSBwb3B1cCBjbGFzc1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIG1vZGFsU2VsZWN0b3IsXG4gICAgaGFuZGxlRm9ybVN1Ym1pdFxuICB9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgbW9kYWxTZWxlY3RvclxuICAgIH0pOyAvLyB0byBwYXNzIHRoZSBwb3B1cCB0byBwYXJlbnRcblxuICAgIHRoaXMuX21vZGFsRm9ybSA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvcm0nKSAvLyBub3cgd2UgZ28gYWNjZXNzIHRvIHRoaXMgdGhhbmtzIHRvIHBhc3NpbmcgaXQgdGhydSB0aGUgc3VwZXIoKVxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX21vZGFsRm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWxfX2lucHV0JylcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19idXR0b24nKVxuICAgIC8vaSBjb3VsZCBnZXQgdGhlIGRlZmF1bHQgYnV0dG9uIHRleHQgZnJvbSB0aGUgYWJvdmUgdmFyaWFibGUgYW5kIHVzZSBpdCBhZnRlcndhcmRzIGZvciB0aGUgbG9hZGluZyB0ZXh0IGZ1bmN0aW9uXG4gIH1cbiAgX2dldGlucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fVxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlOyAvLyBmb3IgZWFjaCBpbnB1dCBpdCBhZGRzIGEga2V5IHZhbHVlIHBhaXIgd2l0aFxuICAgICAgLy9zZXRzIGtleSBvZiB0aGF0IHByb3BlcnR5IGVxdWFscyB0byB0aGUgbmFtZSBvZiBlYWNoIGZvcm1cbiAgICAgIC8vIHlvdSBhcmUgcGFzc2luZyB0aGUgaW5wdXQgdmFsdWVzIGZyb20gdGhlIGZvcm1cbiAgICB9KVxuICAgIC8vd2hpY2ggY29sbGVjdHMgZGF0YSBmcm9tIGFsbCB0aGUgaW5wdXQgZmllbGRzIGFuZCByZXR1cm5zIGl0IGFzIGFuIG9iamVjdC4gVGhpcyBkYXRhIHNob3VsZCB0aGVuIGJlIHBhc3NlZCB0byB0aGUgc3VibWlzc2lvbiBoYW5kbGVyIGFzIGFuIGFyZ3VtZW50LlxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuXG4gICAgLy9jbGFzcyBzaG91bGQgYWRkIGEgc3VibWl0IGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBmb3JtIGFuZCBjYWxsIHRoZSBzZXRFdmVudExpc3RlbmVycygpIG1ldGhvZCBvZiB0aGUgcGFyZW50IGNsYXNzLlxuICAgIC8vdGhpcyBmb3IgdGhlIHN1Ym1pdCBsaXN0ZW50ZXJzXG4gICAgdGhpcy5fbW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRpbnB1dFZhbHVlcygpKTtcblxuICAgIH0pXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX21vZGFsRm9ybS5yZXNldCgpXG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIHNldExvYWRpbmdCdXR0b25UZXh0KGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKXtcbiAgICBpZihpc0xvYWRpbmcpe1xuICAgICByZXR1cm4gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XG4gICAgfVxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiXG4gIH1cblxufVxuXG4vLyBpbiBpbmRleCAuanNcbi8vY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5tb2RhbF90eXBlX2FkZC1qcycsICgpID0+IHtcbi8vfSk7XG4vL25ld0NhcmRQb3B1cC5vcGVuKClcbi8vbmV3Q2FyZFBvcHVwLmNsb3NlKCkiLCJjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgLy8gY29uc3RydWN0b3IgYm9keVxuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuXG4gIC8vTUVUSE9EUyBGT1IgR0VUXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICAvLyAuLi5cbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4gLyp7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9Ki9cbiAgICAgdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKVxuICAgICApO1xuICB9XG5cblxuICBnZXRJbml0aWFsVXNlcigpIHtcbiAgICAvLyAuLi5cbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKSk7XG4gIH1cbiAgLy9NRVRIT0RTIEZPUiBQQVRDSFxuICAvLyB0aGlzIGlzIGxpbmsgYmVjYXVzZSBhc3NpZ25lZCBmcm9tIHRoZSBmdW5jdGlvbiBpbiBpbmRleFxuICBzZXRBdmF0YXJJbWFnZShhdmF0YXIpIHsgLy8gaHR0cHM6Ly8uLi5cbiAgICAvLyAuLi4gIC8vZmV0Y2gganVzdCBhbGxvd3MgdG8gIGRlYWwgd2l0aCBhbGwgc29ydHMgb2YgcmVxdWVzdHMhXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsIC8vIFwieyBcImF2YXRhclwiOiBcImh0dHBzOi8vLi4uXCIgfVwiICAvLyBjaGVjayBkaWZlcmVuY2VzIGJldHdlZW4gcGF0Y2ggYW5kIHBvc3QgbWV0aG9kc1xuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgYXZhdGFyXG4gICAgICAgIH0pIC8vYWNjZXB0cyBhbiBvYmogYXMgYXJndW1lbnQgYW5kIHR1cm5zIGludG8gc3RyaW5nIGpzb24gZm9ybWF0dGVkLlxuICAgICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuICAvL2l0cyBnZXR0aW5nIGFuIG9iamVjdCBmcm9tIHRoZSBmcm9udCBlbmRcbiAgc2V0VXNlck5hbWVJbmZvKHtcbiAgICBuYW1lLFxuICAgIGRlc2NyaXB0aW9uXG4gIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLCAvLyBcInsgXCJhdmF0YXJcIjogXCJodHRwczovLy4uLlwiIH1cIiAgLy8gY2hlY2sgZGlmZXJlbmNlcyBiZXR3ZWVuIHBhdGNoIGFuZCBwb3N0IG1ldGhvZHNcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgYWJvdXQ6IGRlc2NyaXB0aW9uIC8vaXQncyBtYWtpbmcgdGhlIGFib3V0IGtleSB2YWx1ZSB0aGUgc2FtZSBhcyB0aGUgZGVzY3JpcHRpb24gcHJvcGVydHlcbiAgICAgICAgfSkgLy9hY2NlcHRzIGFuIG9iaiBhcyBhcmd1bWVudCBhbmQgdHVybnMgaW50byBzdHJpbmcganNvbiBmb3JtYXR0ZWQuXG4gICAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xuXG4gIH1cbiAgLy9NRVRIT0RTIEZPUiBQT1NUXG4gIHBvc3ROZXdDYXJkKG5hbWUsbGluayl7XG4gICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLCAvLyBcInsgXCJhdmF0YXJcIjogXCJodHRwczovLy4uLlwiIH1cIiAgLy8gY2hlY2sgZGlmZXJlbmNlcyBiZXR3ZWVuIHBhdGNoIGFuZCBwb3N0IG1ldGhvZHNcbiAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgbGluayAvL2l0J3MgbWFraW5nIHRoZSBhYm91dCBrZXkgdmFsdWUgdGhlIHNhbWUgYXMgdGhlIGRlc2NyaXB0aW9uIHByb3BlcnR5XG4gICAgICAgICB9KSAvL2FjY2VwdHMgYW4gb2JqIGFzIGFyZ3VtZW50IGFuZCB0dXJucyBpbnRvIHN0cmluZyBqc29uIGZvcm1hdHRlZC5cbiAgICAgICB9KVxuICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIC8vTUVUSE9EUyBGT1IgREVMRVRFXG4gIGRlbGV0ZUFDYXJkKGlkKXtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH1gLCB7XG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIiwgLy8gXCJ7IFwiYXZhdGFyXCI6IFwiaHR0cHM6Ly8uLi5cIiB9XCIgIC8vIGNoZWNrIGRpZmVyZW5jZXMgYmV0d2VlbiBwYXRjaCBhbmQgcG9zdCBtZXRob2RzXG4gICAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgZGVsZXRlVGhlQ2FyZExpa2VTdGF0ZShpZCl7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsIC8vIFwieyBcImF2YXRhclwiOiBcImh0dHBzOi8vLi4uXCIgfVwiICAvLyBjaGVjayBkaWZlcmVuY2VzIGJldHdlZW4gcGF0Y2ggYW5kIHBvc3QgbWV0aG9kc1xuICAgICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIC8vTUVUSE9EIEZPUiBQVVRcbiAgYWRkVGhlQ2FyZExpa2VTdGF0ZShpZCl7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsIC8vIFwieyBcImF2YXRhclwiOiBcImh0dHBzOi8vLi4uXCIgfVwiICAvLyBjaGVjayBkaWZlcmVuY2VzIGJldHdlZW4gcGF0Y2ggYW5kIHBvc3QgbWV0aG9kc1xuICAgICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpKTtcbiAgfVxuXG5cbn1cbi8vIHRoaXMgaXMgdGhlIG9wdGlvbnMgb2JqIGJlaW5nIHBhc3NlZFxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImRlOTMyYzZlLTdlMjItNDY5ZS05NDk1LTJjZDQzY2QxMjMxYlwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gIH1cbn0pO1xuXG4vKlxuVXNlciByb3V0ZXMsIEFQSSBFTkRQT0lOVFNcblxuR0VUIC8gdXNlcnMgLyBtZeKAkyBHZXQgdGhlIGN1cnJlbnQgdXNlcuKAmSBzIGluZm9cblBBVENIIC8gdXNlcnMgLyBtZeKAkyBVcGRhdGUgeW91ciBwcm9maWxlIGluZm9ybWF0aW9uXG5QQVRDSCAvIHVzZXJzIC8gbWUgLyBhdmF0YXLigJMgVXBkYXRlIGF2YXRhclxuQ2FyZCByb3V0ZXNcblxuR0VUIC8gY2FyZHPigJMgR2V0IGFsbCBjYXJkc1xuUE9TVCAvIGNhcmRz4oCTIENyZWF0ZSBhIGNhcmRcbkRFTEVURSAvIGNhcmRzIC86IGNhcmRJZOKAkyBEZWxldGUgYSBjYXJkXG5QVVQgLyBjYXJkcyAvOiBjYXJkSWQgLyBsaWtlc+KAkyBMaWtlIGEgY2FyZFxuREVMRVRFIC8gY2FyZHMgLzogY2FyZElkIC8gbGlrZXPigJMgRGlzbGlrZSBhIGNhcmRcbiovIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbi8vaW1wb3J0IHtjbG9zZVBvcFVwLG9wZW5Qb3BVcCxlc2NhcGVNb2RhbEhhbmRsZXJ9IGZyb21cIi4uL3V0aWxzL3V0aWxzLmpzXCJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbi8vaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL3NjcmlwdHMvUG9wdXBXaXRoRm9ybS5qc1wiXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgcHJvZmlsZUVkaXRCdG4sXG4gIHByb2ZpbGVFZGl0TW9kYWwsXG4gIHByb2ZpbGVNb2RhbENsb3NlQnRuLFxuICBwcm9maWxlVGl0bGUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxuICBjYXJkQWRkTW9kYWwsXG4gIGNhcmRBZGRCdG4sXG4gIGNhcmRBZGRDbG9zZUJ1dHRvbixcbiAgY2FyZEFkZEZvcm0sXG4gIHBpY3R1cmVNb2RhbCxcbiAgcGljdHVyZU1vZGFsQ2xvc2VCdG4sXG4gIHBpY3R1cmVNb2RhbEltYWdlLFxuICBwaWN0dXJlTW9kYWxDYXB0aW9uLFxuICBwcm9maWxlRWRpdEZvcm0sXG4gIGNhcmRUZW1wbGF0ZSxcbiAgY2FyZEdhbGxlcnlTZWN0aW9uLFxuICBtb2RhbHMsXG4gIGNhcmRTZWxlY3RvcixcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBkZWxldGVDYXJkTW9kYWwsXG4gIGRlbGV0ZU1vZGFsQnRuLFxuICBjaGFuZ2VBdmF0YXJJY29uLFxuICBjaGFuZ2VBdmF0YXJQaWN0dXJlRm9ybVxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtU3VibWl0IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1TdWJtaXQuanNcIjtcbmltcG9ydCB7XG4gIGFwaVxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcblxuLy89PT09PT09PT09PT09PUVOQUJMRSBWQUxJREFUSU9OU1xuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBwcm9maWxlRWRpdEZvcm0gLyonI21vZGFsLXR5cGUtZWRpdCcqL1xuKTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBjYXJkQWRkRm9ybSAvKicjYWRkLWNhcmQtZm9ybScqL1xuKTtcblxuY29uc3QgY2hhbmdlQXZhdGFyUGljdHVyZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG4gIGNoYW5nZUF2YXRhclBpY3R1cmVGb3JtXG4pO1xuXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNoYW5nZUF2YXRhclBpY3R1cmVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuLy89PT09PT09PT09PT1DbEFTU0VTIElOU1RBTlRJQVRJT05TXG5cbi8vcmVuZGVyIHRoZSBjYXJkc1xuXG4vL29uY2Ugd2Ugb2J0YWluIHRoZSBkYXRhIG9yIGxpc3QgZnJvbSBBUEkgd2Ugd2lsbCB1c2UgaXQgd2l0aCB0aGUgc2VjdGlvbiBjbGFzcyFcbi8qXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoaW5kaXZpZHVhbENhcmQpID0+IHtcbiAgICAgIHJlbmRlckNhcmQoaW5kaXZpZHVhbENhcmQpO1xuICAgIH0sXG4gIH0sXG4gIGNhcmRHYWxsZXJ5U2VjdGlvblxuKTtcbmNhcmRMaXN0LnJlbmRlck1ldGhvZCgpO1xuKi9cblxuLy9lZGl0IHByb2ZpbGUgZm9tciBwb3B1cFxuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBtb2RhbFNlbGVjdG9yOiBcIi5tb2RhbF90eXBlX2VkaXQtanNcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQsXG59KTtcbmVkaXRQcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL21ha2UgYSBhZGRDYXJkRm9ybVxuY29uc3QgYWRkQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIG1vZGFsU2VsZWN0b3I6IFwiLm1vZGFsX3R5cGVfYWRkLWpzXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IGhhbmRsZUNhcmRBZGRTdWJtaXQsXG59KTtcbmFkZENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vLyB2YXJpYWJsZSB0byBtYWtlIGltYWdlcyBtb2RhbCBzaG93IHdoZW4gY2xpY2tlZFxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7XG4gIG1vZGFsU2VsZWN0b3I6IFwiLm1vZGFsX3R5cGVfcGljdHVyZS1qc1wiLFxufSk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vL3NldCB0aGUgdXNlcm5hbWUgZm9yIGVkaXQgcHJvZmlsZSB3aXRoIHRoaXMgY2xhc3NcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5sb3doZWFkZXJfX3RpdGxlXCIsXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwiLmxvd2hlYWRlcl9fc3BhblwiLFxuICBBdmF0YXJTZWxlY3RvcjogXCIubG93aGVhZGVyX19pbWdcIlxufSk7XG5cblxuLy8gbGFzdCAyIG5ldyBwb3B1cFxuXG4vL25ldyBwb3B1cCBmb3IgcHJvbXB0aW5nIGlmIHdpbGwgZGVsZXRlIGEgY2FyZFxuY29uc3QgYXJlWW91RGVsZXRpbmdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybVN1Ym1pdCh7XG4gIG1vZGFsU2VsZWN0b3I6IFwiLm1vZGFsX3R5cGVfZGVsZXRlX2NhcmQtanNcIixcbn0pXG5hcmVZb3VEZWxldGluZ0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL25ldyBwb3B1cCBmb3Igd2hlbiB5b3UgZGVjaWRlIHRvIGNoYW5nZSB0aGUgdXNlcidzIHByb2ZpbGUgcGljXG5cbmNvbnN0IGNoYW5nZVByb2ZpbGVQaWNQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgbW9kYWxTZWxlY3RvcjogXCIubW9kYWxfdHlwZV9jaGFuZ2Vwcm9maWxlcGljLWpzXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IGhhbmRsZUNoYW5nZUF2YXRhclN1Ym1pdFxufSlcbmNoYW5nZVByb2ZpbGVQaWNQb3B1cC5zZXRFdmVudExpc3RlbmVycygpXG5cblxuXG4vL0ZVTkNUSU9OU1xuZnVuY3Rpb24gcmVuZGVyQ2FyZChpbmRpdmlkdWFsQ2FyZCkge1xuICBjb25zdCBjYXJkVmlldyA9IGdldENhcmRWaWV3KGluZGl2aWR1YWxDYXJkKTtcbiAgY2FyZExpc3QuYWRkSXRlbShjYXJkVmlldyk7XG59XG5cbi8vZ2V0IGEgY2xvbmUgb2YgY2FyZCB0ZW1wbGF0ZSBhbmQgYWRkIHRoZSBuZXcgc291cmNlIGltZyBhbmQgdGV4dCBpdCB0YWtlcyBlYWNoIG9iaiBpdGVyYXRpb24gYXMgY2FyZERhdGFcbmZ1bmN0aW9uIGdldENhcmRWaWV3KGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIuY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrLCBoYW5kbGVEZWxldGVCdXR0b24sIGhhbmRsZUNhcmRMaWtlQ2xpY2spO1xuICByZXR1cm4gY2FyZC5nZXRFbGVtZW50VmlldygpO1xufVxuXG4vL0hBTkRMRVIgRlVOQ1RJT05TXG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRMaWtlQ2xpY2soY2FyZCkge1xuaWYoIWNhcmQuaXNMaWtlZCl7XG4gYXBpLmFkZFRoZUNhcmRMaWtlU3RhdGUoY2FyZC5faWQpLnRoZW4oKCk9PntcbiAgY2FyZC5pc0xpa2VkID0gdHJ1ZTtcbiAgY2FyZC50b2dnbGVMaWtlQnV0dG9uKClcbiB9KS5jYXRjaChjb25zb2xlLmVycm9yKTtcbn1cbmVsc2UgaWYgKGNhcmQuaXNMaWtlZCl7XG4gICBhcGkuZGVsZXRlVGhlQ2FyZExpa2VTdGF0ZShjYXJkLl9pZCkudGhlbigoKSA9PiB7XG4gICAgIGNhcmQuaXNMaWtlZCA9IGZhbHNlO1xuICAgICBjYXJkLnRvZ2dsZUxpa2VCdXR0b24oKVxuICAgfSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG59XG5cbn1cblxuXG4vL2hhbmRsZXIgdG8gc2V0IHRoZSB0ZXh0IGluc2lkZSB0aGUgZWRpdCAgdGFrZSBvdXQgdGhlIGFkZCBwYXJ0IG9mIHRoZSBmdW5jdGlvblxuZnVuY3Rpb24gaGFuZGxlRWRpdEJ1dHRvbigpIHtcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICAvL3R1cm4gaXQgaW50byBhbiBhcnJvdyBmdW5jIHByZXZlbnQgZGVmYXVsdCBhbmQgcmVhcnJhbmdlIHRoZSB2YWx1ZSBhbmQgdGV4dCBjb250ZW50IGFuZCBjbG9zZSB0aGUgbW9kYWxcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VyRGF0YS51c2VyTmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyRGF0YS51c2VyRGVzY3JpcHRpb247IC8vcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICAvLyBwcm9maWxlRWRpdE1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGVkaXRQcm9maWxlRm9ybS5vcGVuKCk7XG5cbn1cblxuLy9oYW5kbGVyIHRvIHNldCB0aGUgdGV4dCBpbnNpZGUgdGhlIGVkaXRcbmZ1bmN0aW9uIGhhbmRsZUFkZEJ1dHRvbigpIHtcbiAgYWRkQ2FyZEZvcm0ub3BlbigpO1xufVxuXG4vL2hhbmRsZXIgZnVuY3Rpb24gdG8gdXBkYXRlIHRleHQgaW5zaWRlIGVkaXQgcHJvZmlsZVxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQocHJvZmlsZURhdGEpIHtcbiAgZWRpdFByb2ZpbGVGb3JtLnNldExvYWRpbmdCdXR0b25UZXh0KHRydWUpXG4gIC8vdXNlIHRoZSBhcGkgcGF0Y2ggbWV0aG9kIGhlcmUgdG8gc2V0IHRoZSBpbml0aWFsIHVzZXIgZGF0YVxuICBhcGkuc2V0VXNlck5hbWVJbmZvKHByb2ZpbGVEYXRhKSAvL3doZW4gcmVxdWVzdHMgc3VjY2VkcyB1c2UgdGhlbiBhbmQgY2F0Y2hcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgIG5hbWU6IHJlcy5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogcmVzLmFib3V0LFxuICAgICAgfSk7IC8vdGhpcyB1cGRhdGVzIHRoZSB1c2VyIGluZm8gdG8gdGhlIHJlc29wbnNlIHJlY2VpdmVkXG4gICAgfSkuY2F0Y2goY29uc29sZS5lcnJvcikuZmluYWxseSgoKSA9PiB7XG4gICAgICBlZGl0UHJvZmlsZUZvcm0uc2V0TG9hZGluZ0J1dHRvblRleHQoZmFsc2UpXG4gICAgfSk7XG5cblxuICBlZGl0UHJvZmlsZUZvcm0uY2xvc2UoKTtcbiAgLy9jbG9zZVBvcFVwKHByb2ZpbGVFZGl0TW9kYWwpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkQWRkU3VibWl0KG5ld0NhcmREYXRhKSB7XG5cbiAgY29uc3QgbmFtZSA9IG5ld0NhcmREYXRhLnRpdGxlOyAvL2UudGFyZ2V0LnRpdGxlLnZhbHVlIC8vIHRpdGxlIGlzIHRoZSBuYW1lIGF0dHJpYnV0ZVxuICBjb25zdCBsaW5rID0gbmV3Q2FyZERhdGEubGluazsgLy9lLnRhcmdldC5saW5rLnZhbHVlXG5cblxuXG4gIGFwaS5wb3N0TmV3Q2FyZChuYW1lLCBsaW5rKS50aGVuKChyZXMpID0+IHsvL2NyZWF0aW5nIHRoZSBjYXJkIGluIHRoZSBzZXJ2ZXIgLHJlcyBpcyB0aGUgb2JqZWN0IHdpdGggYWxsIHRoZSBwcm9wZXJ0aWVzIGluIHRoZSBzZXJ2ZXJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBnZXRDYXJkVmlldygvKntcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGluayxcbiAgICAgIH0qLyByZXMpOyAvL2p1c3Qgb24gdXNlciBpbnRlcmZhY2VcbiAgICBjYXJkTGlzdC5hZGRJdGVtKG5ld0NhcmQpO1xuICAgIGFkZENhcmRGb3JtLmNsb3NlKCk7XG4gIH0pLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoZXJyb3IpKTtcblxuXG4gIGFkZEZvcm1WYWxpZGF0b3IuZGlzYWJsZWRCdXR0b24oKTtcblxufVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcbiAgaW1hZ2VQb3B1cC5vcGVuKHtcbiAgICBuYW1lLFxuICAgIGxpbmssXG4gIH0pO1xufVxuXG4vL25lZWRzIGFjY2VzcyB0byB0aGUgdG8gdGhlIGlkIG9mIHRoZSBjYXJkIGFuZCB0aGUgY2FyZCBlbGVtZW50XG4vL3dlIHdhbnQgdG8gbWFrZSB1c2Ugb2YgYSBjbG9zdXJlXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVCdXR0b24oaWQsIGNhcmRFbGVtZW50KSB7XG4gIGFyZVlvdURlbGV0aW5nQ2FyZFBvcHVwLm9wZW4oKTtcblxuICBmdW5jdGlvbiBoYW5kbGVEZWxldGVTdWJtaXQoKSB7XG4gICAgLy8gbmVlZCBhY2Nlc3MgdG8gY2FyZCBJRCBhbmQgY2FyZCBlbGVtZW50XG4gICAgYXBpLmRlbGV0ZUFDYXJkKGlkKS50aGVuKCgpID0+IHtcbiAgICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgYXJlWW91RGVsZXRpbmdDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICB9XG5cbiAgYXJlWW91RGVsZXRpbmdDYXJkUG9wdXAuc2V0U3VibWl0QWN0aW9uKGhhbmRsZURlbGV0ZVN1Ym1pdClcbn1cblxuLy9UT0RPIG1ha2UgaXQgc28gdGhhdCB5b3UgY2FuIGNoYW5nZSB0aGUgaW1nIGJhc2VkIG9uIHRoZSB1cmwgcHJvdmlkZWRcbmZ1bmN0aW9uIGhhbmRsZUNoYW5nZUF2YXRhclByb2ZpbGVQaWMoKSB7XG4gIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5vcGVuKClcbn1cbi8vIHdpbGwgdGFrZSB0aGUgdmFsdWUgb2YgdGhlIGxpbmsgcHJvcGVydHkgaW4gdGhlIG9iamVjdCByZWNlaXZlZCBhcyBhcmd1bWVudFxuZnVuY3Rpb24gaGFuZGxlQ2hhbmdlQXZhdGFyU3VibWl0KHtcbiAgbGluayAvL3RoZSBsaW5rIGlzIHRoZSB1cmwgbmVlZGVkIHRvIHdvcmsgd2l0aCB0aGlzIHByb2plY3Rcbn0pIHtcbiAgLy8gIGxldCBhdmF0YXJJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG93aGVhZGVyX19pbWcnKVxuICAvLyBhdmF0YXJJbWcuc3JjID0gbGluaztcblxuICAvL3BhdGNoIG1ldGhvZCBmb3IgdGhlIGF2YXRhciB1c2luZyB0aGUgYXBpXG4gIGFwaS5zZXRBdmF0YXJJbWFnZShsaW5rKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIoe1xuICAgICAgICBwaWN0dXJlOiByZXMuYXZhdGFyXG4gICAgICB9KVxuICAgICAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLmNsb3NlKClcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKFwiPj5FUlJPUlwiLCBlcnJvcikpXG5cbn1cblxuXG4vL0VWRU5UIExJU1RFTkVSU1xucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUVkaXRCdXR0b24pO1xuY2FyZEFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQWRkQnV0dG9uKTtcbmNoYW5nZUF2YXRhckljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNoYW5nZUF2YXRhclByb2ZpbGVQaWMpXG5cblxuLy8tLS0tLVVTSU5HIEFQSVxubGV0IGNhcmRMaXN0OyAvLyB0aGlzIHdpbGwgYmUgdGhlIGRlZmF1bHQgY2FyZCB0aGF0J3MgcmV0dXJuZWQgZnJvbSB0aGUgc2VydmVyXG5cbi8vVXNpbmcgZXhwb3J0ZWQgYXBpIHZhcmlhYmxlIGZyb20gQVBJIENsYXNzXG5cbi8vU2V0IHRoZSBpbml0aWFsIENhcmRcbmFwaVxuICAuZ2V0SW5pdGlhbENhcmRzKClcbiAgLnRoZW4oKHJlcykgPT4ge1xuICAgIC8vIGNvbnNvbGUubG9nKFwiQ2FyZCBEYXRhOlwiLCByZXMpXG4gICAgLypjb25zdCovXG4gICAgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gICAgICAgIGl0ZW1zOiByZXMsXG4gICAgICAgIHJlbmRlcmVyOiAoaW5kaXZpZHVhbENhcmQpID0+IHtcbiAgICAgICAgICByZW5kZXJDYXJkKGluZGl2aWR1YWxDYXJkKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBjYXJkR2FsbGVyeVNlY3Rpb25cbiAgICApO1xuICAgIGNhcmRMaXN0LnJlbmRlck1ldGhvZCgpO1xuICB9KVxuICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhcIj4+RVJST1JcIiwgZXJyb3IpKTtcblxuXG4vLyBTZXQgdGhlIGluaXRpYWwgVXNlciBwaWN0dXJlIGRlc2NyaXB0aW9uXG5hcGkuZ2V0SW5pdGlhbFVzZXIoKVxuICAudGhlbigocmVzKSA9PiB7XG4gICAgLy9zZXQgdXNlciBpbmZvIGF0IHN0YXJ0XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgbmFtZTogcmVzLm5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogcmVzLmFib3V0LFxuICAgIH0pO1xuICAgIC8vc2V0IGltYWdlIGF0IHN0YXJ0XG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih7XG4gICAgICBwaWN0dXJlOiByZXMuYXZhdGFyXG4gICAgfSlcbiAgfSkuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhcIj4+RVJST1JcIiwgZXJyb3IpKSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIG1vZGFsU2VsZWN0b3JcbiAgfSkge1xuICAgIHN1cGVyKHttb2RhbFNlbGVjdG9yfSk7XG4gICAvLyB0aGlzLl9tb2RhbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbihkYXRhKSB7XG4gICAgY29uc3Qge25hbWUsbGlua30gPSBkYXRhO1xuICAgIHN1cGVyLm9wZW4oKVxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3BpY3R1cmVzJykuc2V0QXR0cmlidXRlKCdzcmMnLCBsaW5rKSAvL2dvIG90IHRoZSBpbWFnZSBlbGVtZW50IGFuZCBjaGFuZ2UgaXQgdG8gdGhlIGltYWdlIHNvdXJjZSB0aGF0IGlzICBpbiBsaW5lIDY5XG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fcGljdHVyZXMnKS5hbHQgPSBuYW1lOyAvL3NldCB0aGUgYWx0IHRleHQgdG8gdGhlIG5hbWVcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19waWN0dXJlc19hbHQnKS50ZXh0Q29udGVudCA9IC8qY2FyZERhdGEuKi8gbmFtZSA7XG4gICAgLy9jbGFzcyB3aWxsIG5lZWQgdG8gYWNjZXB0IHRoZSBuYW1lIGFuZCBsaW5rIG9mIHRoZSBjYXJkIGFzIGFyZ3VtZW50cyBhbmQgYWRkIGFuIGltYWdlIHRvIHRoZSBwb3B1cCBhbmQgdGhlIGNvcnJlc3BvbmRpbmcgaW1hZ2Ugc3JjIGF0dHJpYnV0ZSBhbG9uZyB3aXRoIGEgY2FwdGlvbiBmb3IgdGhlIGltYWdlLiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIGluIHlvdXIgaW1hZ2UgY2xpY2sgaGFuZGxlciBpbiBpbmRleC5qcy5cbiAgfVxuXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgbmFtZVNlbGVjdG9yLFxuICAgIGRlc2NyaXB0aW9uU2VsZWN0b3IsXG4gICAgQXZhdGFyU2VsZWN0b3JcbiAgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKVxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKEF2YXRhclNlbGVjdG9yKVxuICB9XG4gIC8vY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHJlbmRlcmluZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdXNlciBvbiB0aGUgcGFnZS4gVGhpcyBjbGFzcyBzaG91bGQ6XG5cbiAgLy9UYWtlIGFuIG9iamVjdCB3aXRoIHRoZSBzZWxlY3RvcnMgb2YgdHdvIGVsZW1lbnRzIGludG8gdGhlIGNvbnN0cnVjdG9yOiBvbmVcbiAgLy9mb3IgdGhlIHByb2ZpbGXigJkgcyBuYW1lIGVsZW1lbnQgYW5kIG9uZSBmb3IgaXRzIGpvYiBlbGVtZW50LlxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXNlck5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgdXNlckRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnRcbiAgICB9XG4gIH1cbiAgLy9IYXZlIGEgcHVibGljIG1ldGhvZCBuYW1lZCBnZXRVc2VySW5mbygpLCB3aGljaCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSB1c2VyLlRoaXMgbWV0aG9kIHdpbGwgYmUgaGFuZHlcbiAgLy9mb3IgY2FzZXMgd2hlbiBpdCAncyBuZWNlc3NhcnkgdG8gZGlzcGxheSB0aGUgdXNlciBkYXRhIGluIHRoZSBvcGVuIGZvcm0uXG4gIHNldFVzZXJJbmZvKHtcbiAgICBuYW1lLFxuICAgIGRlc2NyaXB0aW9uLFxuICB9KSB7XG4gICAgaWYgKG5hbWUpIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBpZiAoZGVzY3JpcHRpb24pIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uXG4gICAgLy9jdXJseSBicmFjZXMgaWYgdGhleSBhcmUgbm90IGluIHRoZSBzYW1lIGxpbmVcbiAgfVxuICAgc2V0VXNlckF2YXRhcih7XG4gICAgIHBpY3R1cmVcbiAgIH0pIHtcblxuICAgICBpZiAocGljdHVyZSkgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBwaWN0dXJlO1xuICAgICAvL2N1cmx5IGJyYWNlcyBpZiB0aGV5IGFyZSBub3QgaW4gdGhlIHNhbWUgbGluZVxuICAgfVxuICAvL0hhdmUgYSBwdWJsaWMgbWV0aG9kIG5hbWVkIHNldFVzZXJJbmZvKCksIHdoaWNoIHRha2VzIG5ldyB1c2VyIGRhdGEgYW5kIGFkZHMgaXQgdG8gdGhlIHBhZ2UuVGhpcyBtZXRob2Qgc2hvdWxkIGJlIHVzZWQgYWZ0ZXIgc3VjY2Vzc2Z1bCBzdWJtaXNzaW9uIG9mIHRoZSBwcm9maWxlIGZvcm0uXG4gIC8vc2V0IGluZm8gYmFzZWQgb24gd2hhdHMgcGFzc2VkIHRvIGl0XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbi8vdGhpcyBpcyBhIGNoaWxkIG9mIHRoZSBwb3B1cCBjbGFzc1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybVN1Ym1pdCBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIG1vZGFsU2VsZWN0b3JcbiAgfSl7XG4gICAgc3VwZXIoe1xuICAgICAgbW9kYWxTZWxlY3RvclxuICAgIH0pOyAvLyB0byBwYXNzIHRoZSBwb3B1cCB0byBwYXJlbnRcbiAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J1dHRvbicpXG4gICB0aGlzLl9pbml0aWFsVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudC50cmltKCk7XG4gICB0aGlzLl9tb2RhbEZvcm0gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19mb3JtJyk7XG4gIH1cbiAgIC8vIHRoaXMgcGFzc2VzIGlkIGFuZCBjYXJkRUxlbWVudCB0byB0aGUgdGhpc2hhbmRsZXN1Ym1pdGNhbGxiYWNrIG9uIHNldCBldmVudCBsaXN0ZW5lcnMgYmVsb3dcbiAgIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pe1xuICAgIC8vYWN0aW9uIHdpbGwgYmUgZGVsZXRlIHZpYSBhcGkgaXQgd2lsbCBleGVjdXRlIHRoYXQgYWN0aW9uXG4gICAgdGhpcy5faGFuZGxlU3VibWl0Q2FsbGJhY2sgPSBhY3Rpb24vL2l0cyBlcXVhbCB0byB0aGUgZGVsZXRpb24gZm9yIHRoZSBBUElcbiAgIH1cblxuICAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcbiAgIHRoaXMuX21vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnICwoZSk9PntcbiAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICB0aGlzLl9oYW5kbGVTdWJtaXRDYWxsYmFjaygpO1xuICAgfSlcblxuICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICB9XG5cbn0iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50VHlwZSIsInRoaXMiLCJfc2V0dGluZ3MiLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvciIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvciIsImVycm9yQ2xhc3MiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfaGFzSW52YWxpZElucHV0IiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVkQnV0dG9uIiwiZGlzYWJsZWQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUJ1dHRvbiIsImhhbmRsZUxpa2VDbGlja0J1dHRvbiIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2hhbmRsZUxpa2VDbGlja0J1dHRvbiIsIl9lbGVtZW50IiwidG9nZ2xlTGlrZUJ1dHRvbiIsInRvZ2dsZSIsIl9jaGVja0xpa2VTdGF0ZSIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImdldEVsZW1lbnRWaWV3Iiwic3JjIiwiYWx0IiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJPcHRpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiX2luaXRpYWxBcnJheSIsIl9yZW5kZXJGdW5jdGlvbiIsIl9jb250YWluZXIiLCJyZW5kZXJNZXRob2QiLCJjYXJkSXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInByb2ZpbGVFZGl0QnRuIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJjYXJkQWRkTW9kYWwiLCJjYXJkQWRkQnRuIiwiY2FyZEFkZEZvcm0iLCJwcm9maWxlRWRpdEZvcm0iLCJjYXJkR2FsbGVyeVNlY3Rpb24iLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNoYW5nZUF2YXRhckljb24iLCJjaGFuZ2VBdmF0YXJQaWN0dXJlRm9ybSIsInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsIlBvcHVwIiwibW9kYWxTZWxlY3RvciIsIl9tb2RhbEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY2FwZUNsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJldnQiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfbW9kYWxGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0aW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0Iiwic2V0TG9hZGluZ0J1dHRvblRleHQiLCJpc0xvYWRpbmciLCJsb2FkaW5nVGV4dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfaGFuZGxlUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJ0aGVuIiwiZ2V0SW5pdGlhbFVzZXIiLCJzZXRBdmF0YXJJbWFnZSIsImF2YXRhciIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwic2V0VXNlck5hbWVJbmZvIiwiZGVzY3JpcHRpb24iLCJhYm91dCIsInBvc3ROZXdDYXJkIiwiZGVsZXRlQUNhcmQiLCJkZWxldGVUaGVDYXJkTGlrZVN0YXRlIiwiYWRkVGhlQ2FyZExpa2VTdGF0ZSIsImF1dGhvcml6YXRpb24iLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiY2hhbmdlQXZhdGFyUGljdHVyZVZhbGlkYXRvciIsImVkaXRQcm9maWxlRm9ybSIsInByb2ZpbGVEYXRhIiwiY29uc29sZSIsImxvZyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJjYXRjaCIsImVycm9yIiwiZmluYWxseSIsImFkZENhcmRGb3JtIiwibmV3Q2FyZERhdGEiLCJ0aXRsZSIsIm5ld0NhcmQiLCJnZXRDYXJkVmlldyIsImNhcmRMaXN0IiwiaW1hZ2VQb3B1cCIsInNldEF0dHJpYnV0ZSIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJBdmF0YXJTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9kZXNjcmlwdGlvbkVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsImdldFVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VyRGVzY3JpcHRpb24iLCJfcmVmMiIsInNldFVzZXJBdmF0YXIiLCJfcmVmMyIsInBpY3R1cmUiLCJhcmVZb3VEZWxldGluZ0NhcmRQb3B1cCIsIl9pbml0aWFsVGV4dCIsInRyaW0iLCJzZXRTdWJtaXRBY3Rpb24iLCJhY3Rpb24iLCJfaGFuZGxlU3VibWl0Q2FsbGJhY2siLCJjaGFuZ2VQcm9maWxlUGljUG9wdXAiLCJjYXJkRGF0YSIsIkNhcmQiLCJoYW5kbGVDYXJkTGlrZUNsaWNrIiwiY2FyZCIsImNhcmRFbGVtZW50IiwidXNlckRhdGEiLCJpbmRpdmlkdWFsQ2FyZCIsImNhcmRWaWV3IiwicmVuZGVyQ2FyZCJdLCJzb3VyY2VSb290IjoiIn0=